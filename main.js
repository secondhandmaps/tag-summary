/*
THIS IS A GENERATED/BUNDLED FILE BY ESBUILD
if you want to view the source, please visit the github repository of this plugin
*/

var __create = Object.create;
var __defProp = Object.defineProperty;
var __getOwnPropDesc = Object.getOwnPropertyDescriptor;
var __getOwnPropNames = Object.getOwnPropertyNames;
var __getProtoOf = Object.getPrototypeOf;
var __hasOwnProp = Object.prototype.hasOwnProperty;
var __markAsModule = (target) => __defProp(target, "__esModule", { value: true });
var __export = (target, all) => {
  __markAsModule(target);
  for (var name in all)
    __defProp(target, name, { get: all[name], enumerable: true });
};
var __reExport = (target, module2, desc) => {
  if (module2 && typeof module2 === "object" || typeof module2 === "function") {
    for (let key of __getOwnPropNames(module2))
      if (!__hasOwnProp.call(target, key) && key !== "default")
        __defProp(target, key, { get: () => module2[key], enumerable: !(desc = __getOwnPropDesc(module2, key)) || desc.enumerable });
  }
  return target;
};
var __toModule = (module2) => {
  return __reExport(__markAsModule(__defProp(module2 != null ? __create(__getProtoOf(module2)) : {}, "default", module2 && module2.__esModule && "default" in module2 ? { get: () => module2.default, enumerable: true } : { value: module2, enumerable: true })), module2);
};
var __async = (__this, __arguments, generator) => {
  return new Promise((resolve, reject) => {
    var fulfilled = (value) => {
      try {
        step(generator.next(value));
      } catch (e) {
        reject(e);
      }
    };
    var rejected = (value) => {
      try {
        step(generator.throw(value));
      } catch (e) {
        reject(e);
      }
    };
    var step = (x) => x.done ? resolve(x.value) : Promise.resolve(x.value).then(fulfilled, rejected);
    step((generator = generator.apply(__this, __arguments)).next());
  });
};

// main.ts
__export(exports, {
  default: () => SummaryPlugin
});
var import_obsidian3 = __toModule(require("obsidian"));

// settings.ts
var import_obsidian = __toModule(require("obsidian"));
var SummarySettingTab = class extends import_obsidian.PluginSettingTab {
  constructor(app2, plugin) {
    super(app2, plugin);
    this.plugin = plugin;
  }
  display() {
    let { containerEl } = this;
    containerEl.empty();
    new import_obsidian.Setting(containerEl).setName("Show Callouts").setDesc("Show the text in callout blocks").addToggle((toggle) => toggle.setValue(this.plugin.settings.includecallout).onChange((value) => __async(this, null, function* () {
      this.plugin.settings.includecallout = value;
      yield this.plugin.saveSettings();
    })));
    new import_obsidian.Setting(containerEl).setName("Show Link").setDesc("Show link to original note").addToggle((toggle) => toggle.setValue(this.plugin.settings.includelink).onChange((value) => __async(this, null, function* () {
      this.plugin.settings.includelink = value;
      yield this.plugin.saveSettings();
    })));
    new import_obsidian.Setting(containerEl).setName("Remove Tags").setDesc("Remove tags from text").addToggle((toggle) => toggle.setValue(this.plugin.settings.removetags).onChange((value) => __async(this, null, function* () {
      this.plugin.settings.removetags = value;
      yield this.plugin.saveSettings();
    })));
  }
};

// summarytags.ts
var import_obsidian2 = __toModule(require("obsidian"));
var SummaryModal = class extends import_obsidian2.Modal {
  constructor(app2, onSubmit) {
    super(app2);
    this.onSubmit = onSubmit;
  }
  onOpen() {
    let listTags = [];
    let listFiles = this.app.vault.getMarkdownFiles();
    listFiles.forEach((file) => {
      const cache = app.metadataCache.getFileCache(file);
      listTags = listTags.concat((0, import_obsidian2.getAllTags)(cache));
    });
    const tagsSet = new Set(listTags);
    listTags = Array.from(tagsSet).sort();
    const tagsToExclude = ["None"].concat(listTags);
    let { contentEl } = this;
    contentEl.createEl("h1", { text: "Add Summary" });
    if (listTags.length <= 0) {
      contentEl.setText("There are no tags in your notes");
    } else {
      this.include = listTags[0];
      new import_obsidian2.Setting(contentEl).setName("Select tag to include in the summary").addDropdown((menu) => {
        for (let i = 0; i < listTags.length; i++) {
          menu.addOption(listTags[i], listTags[i]);
        }
        menu.setValue(listTags[0]);
        menu.onChange((value) => {
          this.include = value;
        });
      });
      this.exclude = tagsToExclude[0];
      new import_obsidian2.Setting(contentEl).setName("Select tag to exclude from the summary").addDropdown((menu) => {
        for (let i = 0; i < tagsToExclude.length; i++) {
          menu.addOption(tagsToExclude[i], tagsToExclude[i]);
        }
        menu.setValue(tagsToExclude[0]);
        menu.onChange((value) => {
          this.exclude = value;
        });
      });
      new import_obsidian2.Setting(contentEl).addButton((button) => {
        button.setButtonText("Add Summary").setCta().onClick(() => {
          this.close();
          this.onSubmit(this.include, this.exclude);
        });
      });
    }
  }
  onClose() {
    let { contentEl } = this;
    contentEl.empty();
  }
};

// main.ts
var DEFAULT_SETTINGS = {
  includecallout: true,
  includelink: true,
  removetags: false
};
var SummaryPlugin = class extends import_obsidian3.Plugin {
  onload() {
    return __async(this, null, function* () {
      yield this.loadSettings();
      this.addSettingTab(new SummarySettingTab(this.app, this));
      this.addCommand({
        id: "summary-modal",
        name: "Add Summary",
        editorCallback: (editor) => {
          new SummaryModal(this.app, (include, exclude) => {
            let summary = "```add-summary\n";
            summary += "tags: " + include + "\n";
            if (exclude != "None") {
              summary += "exclude: " + exclude + "\n";
            }
            summary += "```\n";
            editor.replaceRange(summary, editor.getCursor());
          }).open();
        }
      });
      this.registerMarkdownCodeBlockProcessor("add-summary", (source, el, ctx) => __async(this, null, function* () {
        let tags = Array();
        let include = Array();
        let exclude = Array();
        const rows = source.split("\n").filter((row) => row.length > 0);
        rows.forEach((line) => {
          if (line.match(/^\s*tags:[a-zA-Z0-9_\-/# ]+$/g)) {
            const content = line.replace(/^\s*tags:/, "").trim();
            let list = content.split(/\s+/).map((tag) => tag.trim());
            list = list.filter((tag) => {
              if (tag.match(/^#[a-zA-Z]+[^#]*$/)) {
                return true;
              } else if (tag == "all") {
                return true;
              } else {
                return false;
              }
            });
            tags = list;
          }
          if (line.match(/^\s*include:[a-zA-Z0-9_\-/# ]+$/g)) {
            const content = line.replace(/^\s*include:/, "").trim();
            let list = content.split(/\s+/).map((tag) => tag.trim());
            list = list.filter((tag) => {
              if (tag.match(/^#[a-zA-Z]+[^#]*$/)) {
                return true;
              } else {
                return false;
              }
            });
            include = list;
          }
          if (line.match(/^\s*exclude:[a-zA-Z0-9_\-/# ]+$/g)) {
            const content = line.replace(/^\s*exclude:/, "").trim();
            let list = content.split(/\s+/).map((tag) => tag.trim());
            list = list.filter((tag) => {
              if (tag.match(/^#[a-zA-Z]+[^#]*$/)) {
                return true;
              } else {
                return false;
              }
            });
            exclude = list;
          }
        });
        if (tags.length > 0 || include.length > 0) {
          yield this.createSummary(el, tags, include, exclude, ctx.sourcePath);
        } else {
          this.createEmptySummary(el);
        }
      }));
    });
  }
  createEmptySummary(element) {
    const container = createEl("div");
    container.createEl("span", {
      attr: { style: "color: var(--text-error) !important;" },
      text: "There are no blocks that match the specified tags."
    });
    element.replaceWith(container);
  }
  createSummary(element, tags, include, exclude, filePath) {
    return __async(this, null, function* () {
      var _a;
      const validTags = tags.concat(include);
      console.log(validTags);
      let all_tag_info = Array();
      let listFiles = this.app.vault.getMarkdownFiles();
      listFiles = listFiles.filter((file) => {
        const cache = app.metadataCache.getFileCache(file);
        const tagsInFile = (0, import_obsidian3.getAllTags)(cache);
        if (validTags.some((value) => tagsInFile.includes(value))) {
          return true;
        }
        if (validTags.includes("all")) {
          return true;
        }
        return false;
      });
      listFiles = listFiles.sort((file1, file2) => {
        if (file1.path < file2.path) {
          return -1;
        } else if (file1.path > file2.path) {
          return 1;
        } else {
          return 0;
        }
      });
      let listContents = yield this.readFiles(listFiles);
      let summary = "";
      listContents.forEach((item) => {
        const fileName = item[0].name.replace(/.md$/g, "");
        const filePath2 = item[0].path;
        const block = item[1].split(/\n\s*\n/).filter((row) => row.trim().length > 0);
        block.forEach((paragraph) => {
          let valid = false;
          const listTags = paragraph.match(/#[a-zA-Z0-9_\-/#]+/g);
          if (listTags != null && listTags.length > 0) {
            if (!paragraph.contains("```")) {
              valid = this.isValidText(listTags, tags, include, exclude);
            }
          }
          if (valid) {
            paragraph += "\n";
            if (this.settings.removetags) {
              paragraph = paragraph.replace(/#[a-zA-Z0-9_\-/#]+/g, "");
            }
            listTags.forEach((t) => {
              all_tag_info.push({
                tag: t,
                file: fileName,
                path: filePath2,
                text: paragraph
              });
            });
            if (this.settings.includelink) {
              paragraph = "**Source:** [[" + filePath2 + "|" + fileName + "]]\n" + paragraph;
            }
            if (this.settings.includecallout) {
              let callout = "> [!" + fileName + "]\n";
              const rows = paragraph.split("\n");
              rows.forEach((row) => {
                callout += "> " + row + "\n";
              });
              paragraph = callout + "\n\n";
            } else {
              paragraph += "\n\n";
            }
            summary += paragraph;
          }
        });
      });
      all_tag_info = all_tag_info.sort((td1, td2) => {
        if (td1.tag < td2.tag) {
          return -1;
        } else if (td1.tag > td2.tag) {
          return 1;
        } else {
          if (td1.file < td2.file) {
            return -1;
          } else if (td1.file > td2.file) {
            return 1;
          } else {
            return 0;
          }
        }
      });
      console.log(all_tag_info);
      summary = "";
      let prev_tag = "";
      let prev_file = "";
      all_tag_info.forEach((tag_data) => {
        if (tag_data.tag != prev_tag) {
          summary += " \n\n## " + tag_data.tag.replace(/#/g, "") + "\n";
          prev_tag = tag_data.tag;
          prev_file = "";
        }
        if (tag_data.file != prev_file) {
          if (this.settings.includelink) {
            summary += "###### [[" + tag_data.path + "|" + tag_data.file + "]]\n";
          } else {
            summary += "###### " + tag_data.file + "\n";
          }
          prev_file = tag_data.file;
        }
        summary += "+ " + tag_data.text;
        console.log(summary);
      });
      if (summary != "") {
        let summaryContainer = createEl("div");
        yield import_obsidian3.MarkdownRenderer.renderMarkdown(summary, summaryContainer, (_a = this.app.workspace.getActiveFile()) == null ? void 0 : _a.path, null);
        element.replaceWith(summaryContainer);
      } else {
        this.createEmptySummary(element);
      }
    });
  }
  readFiles(listFiles) {
    return __async(this, null, function* () {
      let list = [];
      for (let t = 0; t < listFiles.length; t += 1) {
        const file = listFiles[t];
        let content = yield this.app.vault.cachedRead(file);
        list.push([file, content]);
      }
      return list;
    });
  }
  isValidText(listTags, tags, include, exclude) {
    let valid = true;
    console.log(tags);
    if (tags.includes("all")) {
      return true;
    }
    if (tags.length > 0) {
      valid = valid && tags.some((value) => listTags.includes(value));
    }
    if (include.length > 0) {
      valid = valid && include.every((value) => listTags.includes(value));
    }
    if (valid && exclude.length > 0) {
      valid = !exclude.some((value) => listTags.includes(value));
    }
    return valid;
  }
  loadSettings() {
    return __async(this, null, function* () {
      this.settings = Object.assign({}, DEFAULT_SETTINGS, yield this.loadData());
    });
  }
  saveSettings() {
    return __async(this, null, function* () {
      yield this.saveData(this.settings);
    });
  }
};
//# sourceMappingURL=data:application/json;base64,ewogICJ2ZXJzaW9uIjogMywKICAic291cmNlcyI6IFsibWFpbi50cyIsICJzZXR0aW5ncy50cyIsICJzdW1tYXJ5dGFncy50cyJdLAogICJzb3VyY2VzQ29udGVudCI6IFsiXG5pbXBvcnQgeyBFZGl0b3IsIFBsdWdpbiwgTWFya2Rvd25SZW5kZXJlciwgZ2V0QWxsVGFncywgVEZpbGUgfSBmcm9tICdvYnNpZGlhbic7XG5pbXBvcnQgeyBTdW1tYXJ5U2V0dGluZ1RhYiB9IGZyb20gXCIuL3NldHRpbmdzXCI7XG5pbXBvcnQgeyBTdW1tYXJ5TW9kYWwgfSBmcm9tIFwiLi9zdW1tYXJ5dGFnc1wiO1xuXG5pbnRlcmZhY2UgU3VtbWFyeVNldHRpbmdzIHtcblx0aW5jbHVkZWNhbGxvdXQ6IGJvb2xlYW47XG5cdGluY2x1ZGVsaW5rOiBib29sZWFuO1xuXHRyZW1vdmV0YWdzOiBib29sZWFuO1xufVxuY29uc3QgREVGQVVMVF9TRVRUSU5HUzogUGFydGlhbDxTdW1tYXJ5U2V0dGluZ3M+ID0ge1xuXHRpbmNsdWRlY2FsbG91dDogdHJ1ZSxcblx0aW5jbHVkZWxpbms6IHRydWUsXG5cdHJlbW92ZXRhZ3M6IGZhbHNlLFxufTtcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFN1bW1hcnlQbHVnaW4gZXh0ZW5kcyBQbHVnaW4ge1xuXHRzZXR0aW5nczogU3VtbWFyeVNldHRpbmdzO1xuXG5cdGFzeW5jIG9ubG9hZCgpIHtcblx0XHQvLyBQcmVwYXJlIFNldHRpbmdzXG5cdFx0YXdhaXQgdGhpcy5sb2FkU2V0dGluZ3MoKTtcblx0XHR0aGlzLmFkZFNldHRpbmdUYWIobmV3IFN1bW1hcnlTZXR0aW5nVGFiKHRoaXMuYXBwLCB0aGlzKSk7XG5cblx0XHQvLyBDcmVhdGUgY29tbWFuZCB0byBjcmVhdGUgYSBzdW1tYXJ5XG5cdFx0dGhpcy5hZGRDb21tYW5kKHtcblx0XHRcdGlkOiBcInN1bW1hcnktbW9kYWxcIixcblx0XHRcdG5hbWU6IFwiQWRkIFN1bW1hcnlcIixcblx0XHRcdGVkaXRvckNhbGxiYWNrOiAoZWRpdG9yOiBFZGl0b3IpID0+IHtcblx0XHRcdFx0bmV3IFN1bW1hcnlNb2RhbCh0aGlzLmFwcCwgKGluY2x1ZGUsIGV4Y2x1ZGUpID0+IHtcblx0XHRcdFx0XHQvLyBGb3JtYXQgY29kZSBibG9jayB0byBhZGQgc3VtbWFyeVxuXHRcdFx0XHRcdGxldCBzdW1tYXJ5ID0gXCJgYGBhZGQtc3VtbWFyeVxcblwiO1xuXG5cdFx0XHRcdFx0Ly8gQWRkIHRoZSB0YWdzIGxhYmVsIHdpdGggdGhlIHRhZyBzZWxlY3RlZCBieSB0aGUgdXNlclxuXHRcdFx0XHRcdHN1bW1hcnkgKz0gXCJ0YWdzOiBcIiArIGluY2x1ZGUgKyBcIlxcblwiO1xuXG5cdFx0XHRcdFx0Ly8gQWRkIHRoZSBleGNsdWRlIGxhYmVsIHdpdGggdGhlIHRhZ3MgdG8gZXhjbHVkZVxuXHRcdFx0XHRcdGlmIChleGNsdWRlICE9IFwiTm9uZVwiKSB7XG5cdFx0XHRcdFx0XHRzdW1tYXJ5ICs9IFwiZXhjbHVkZTogXCIgKyBleGNsdWRlICsgXCJcXG5cIjtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0c3VtbWFyeSArPSBcImBgYFxcblwiO1xuXHRcdFx0XHRcdGVkaXRvci5yZXBsYWNlUmFuZ2Uoc3VtbWFyeSwgZWRpdG9yLmdldEN1cnNvcigpKTtcblx0XHRcdFx0fSkub3BlbigpO1xuXHRcdFx0fSxcblx0XHR9KTtcblxuXHRcdC8vIFBvc3QgcHJvY2Vzc29yXG5cdFx0dGhpcy5yZWdpc3Rlck1hcmtkb3duQ29kZUJsb2NrUHJvY2Vzc29yKFwiYWRkLXN1bW1hcnlcIiwgYXN5bmMgKHNvdXJjZSwgZWwsIGN0eCkgPT4ge1xuXHRcdFx0Ly8gSW5pdGlhbGl6ZSB0YWcgbGlzdFxuXHRcdFx0bGV0IHRhZ3M6IHN0cmluZ1tdID0gQXJyYXkoKTtcblx0XHRcdGxldCBpbmNsdWRlOiBzdHJpbmdbXSA9IEFycmF5KCk7XG5cdFx0XHRsZXQgZXhjbHVkZTogc3RyaW5nW10gPSBBcnJheSgpO1xuXG5cdFx0XHQvLyBQcm9jZXNzIHJvd3MgaW5zaWRlIGNvZGVibG9ja1xuXHRcdFx0Y29uc3Qgcm93cyA9IHNvdXJjZS5zcGxpdChcIlxcblwiKS5maWx0ZXIoKHJvdykgPT4gcm93Lmxlbmd0aCA+IDApO1xuXHRcdFx0cm93cy5mb3JFYWNoKChsaW5lKSA9PiB7XG5cdFx0XHRcdC8vIENoZWNrIGlmIHRoZSBsaW5lIHNwZWNpZmllcyB0aGUgdGFncyAoT1IpXG5cdFx0XHRcdGlmIChsaW5lLm1hdGNoKC9eXFxzKnRhZ3M6W2EtekEtWjAtOV9cXC0vIyBdKyQvZykpIHtcblx0XHRcdFx0XHRjb25zdCBjb250ZW50ID0gbGluZS5yZXBsYWNlKC9eXFxzKnRhZ3M6LywgXCJcIikudHJpbSgpO1xuXG5cdFx0XHRcdFx0Ly8gR2V0IHRoZSBsaXN0IG9mIHZhbGlkIHRhZ3MgYW5kIGFzc2lnbiB0aGVtIHRvIHRoZSB0YWdzIHZhcmlhYmxlXG5cdFx0XHRcdFx0bGV0IGxpc3QgPSBjb250ZW50LnNwbGl0KC9cXHMrLykubWFwKCh0YWcpID0+IHRhZy50cmltKCkpO1xuXHRcdFx0XHRcdGxpc3QgPSBsaXN0LmZpbHRlcigodGFnKSA9PiB7XG5cdFx0XHRcdFx0XHRpZiAodGFnLm1hdGNoKC9eI1thLXpBLVpdK1teI10qJC8pKSB7XG5cdFx0XHRcdFx0XHRcdHJldHVybiB0cnVlO1xuXHRcdFx0XHRcdFx0fSBlbHNlIGlmICh0YWcgPT0gXCJhbGxcIikge1xuXHRcdFx0XHRcdFx0ICByZXR1cm4gdHJ1ZTtcblx0XHRcdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0XHQgIHJldHVybiBmYWxzZTtcblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHR9KTtcblx0XHRcdFx0XHR0YWdzID0gbGlzdDtcblx0XHRcdFx0fVxuXHRcdFx0XHQvLyBDaGVjayBpZiB0aGUgbGluZSBzcGVjaWZpZXMgdGhlIHRhZ3MgdG8gaW5jbHVkZSAoQU5EKVxuXHRcdFx0XHRpZiAobGluZS5tYXRjaCgvXlxccyppbmNsdWRlOlthLXpBLVowLTlfXFwtLyMgXSskL2cpKSB7XG5cdFx0XHRcdFx0Y29uc3QgY29udGVudCA9IGxpbmUucmVwbGFjZSgvXlxccyppbmNsdWRlOi8sIFwiXCIpLnRyaW0oKTtcblxuXHRcdFx0XHRcdC8vIEdldCB0aGUgbGlzdCBvZiB2YWxpZCB0YWdzIGFuZCBhc3NpZ24gdGhlbSB0byB0aGUgaW5jbHVkZSB2YXJpYWJsZVxuXHRcdFx0XHRcdGxldCBsaXN0ID0gY29udGVudC5zcGxpdCgvXFxzKy8pLm1hcCgodGFnKSA9PiB0YWcudHJpbSgpKTtcblx0XHRcdFx0XHRsaXN0ID0gbGlzdC5maWx0ZXIoKHRhZykgPT4ge1xuXHRcdFx0XHRcdFx0aWYgKHRhZy5tYXRjaCgvXiNbYS16QS1aXStbXiNdKiQvKSkge1xuXHRcdFx0XHRcdFx0XHRyZXR1cm4gdHJ1ZTtcblx0XHRcdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0XHRcdHJldHVybiBmYWxzZTtcblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHR9KTtcblx0XHRcdFx0XHRpbmNsdWRlID0gbGlzdDtcblx0XHRcdFx0fVxuXHRcdFx0XHQvLyBDaGVjayBpZiB0aGUgbGluZSBzcGVjaWZpZXMgdGhlIHRhZ3MgdG8gZXhjbHVkZSAoTk9UKVxuXHRcdFx0XHRpZiAobGluZS5tYXRjaCgvXlxccypleGNsdWRlOlthLXpBLVowLTlfXFwtLyMgXSskL2cpKSB7XG5cdFx0XHRcdFx0Y29uc3QgY29udGVudCA9IGxpbmUucmVwbGFjZSgvXlxccypleGNsdWRlOi8sIFwiXCIpLnRyaW0oKTtcblxuXHRcdFx0XHRcdC8vIEdldCB0aGUgbGlzdCBvZiB2YWxpZCB0YWdzIGFuZCBhc3NpZ24gdGhlbSB0byB0aGUgZXhjbHVkZSB2YXJpYWJsZVxuXHRcdFx0XHRcdGxldCBsaXN0ID0gY29udGVudC5zcGxpdCgvXFxzKy8pLm1hcCgodGFnKSA9PiB0YWcudHJpbSgpKTtcblx0XHRcdFx0XHRsaXN0ID0gbGlzdC5maWx0ZXIoKHRhZykgPT4ge1xuXHRcdFx0XHRcdFx0aWYgKHRhZy5tYXRjaCgvXiNbYS16QS1aXStbXiNdKiQvKSkge1xuXHRcdFx0XHRcdFx0XHRyZXR1cm4gdHJ1ZTtcblx0XHRcdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0XHRcdHJldHVybiBmYWxzZTtcblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHR9KTtcblx0XHRcdFx0XHRleGNsdWRlID0gbGlzdDtcblx0XHRcdFx0fVxuXHRcdFx0fSk7XG5cblx0XHRcdC8vIENyZWF0ZSBzdW1tYXJ5IG9ubHkgaWYgdGhlIHVzZXIgc3BlY2lmaWVkIHNvbWUgdGFnc1xuXHRcdFx0aWYgKHRhZ3MubGVuZ3RoID4gMCB8fCBpbmNsdWRlLmxlbmd0aCA+IDApIHtcblx0XHRcdFx0YXdhaXQgdGhpcy5jcmVhdGVTdW1tYXJ5KGVsLCB0YWdzLCBpbmNsdWRlLCBleGNsdWRlLCBjdHguc291cmNlUGF0aCk7XG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHR0aGlzLmNyZWF0ZUVtcHR5U3VtbWFyeShlbCk7XG5cdFx0XHR9XG5cdFx0fSk7ICBcblx0fVxuXG5cdC8vIFNob3cgZW1wdHkgc3VtbWFyeSB3aGVuIHRoZSB0YWdzIGFyZSBub3QgZm91bmRcblx0Y3JlYXRlRW1wdHlTdW1tYXJ5KGVsZW1lbnQ6IEhUTUxFbGVtZW50KSB7XG5cdFx0Y29uc3QgY29udGFpbmVyID0gY3JlYXRlRWwoXCJkaXZcIik7XG5cdFx0Y29udGFpbmVyLmNyZWF0ZUVsKFwic3BhblwiLCB7XG5cdFx0XHRhdHRyOiB7IHN0eWxlOiAnY29sb3I6IHZhcigtLXRleHQtZXJyb3IpICFpbXBvcnRhbnQ7JyB9LFxuXHRcdFx0dGV4dDogXCJUaGVyZSBhcmUgbm8gYmxvY2tzIHRoYXQgbWF0Y2ggdGhlIHNwZWNpZmllZCB0YWdzLlwiIFxuXHRcdH0pO1xuXHRcdGVsZW1lbnQucmVwbGFjZVdpdGgoY29udGFpbmVyKTtcblx0fVxuXG5cdC8vIExvYWQgdGhlIGJsb2NrcyBhbmQgY3JlYXRlIHRoZSBzdW1tYXJ5XG5cdGFzeW5jIGNyZWF0ZVN1bW1hcnkoZWxlbWVudDogSFRNTEVsZW1lbnQsIHRhZ3M6IHN0cmluZ1tdLCBpbmNsdWRlOiBzdHJpbmdbXSwgZXhjbHVkZTogc3RyaW5nW10sIGZpbGVQYXRoOiBzdHJpbmcpIHtcblx0XHRjb25zdCB2YWxpZFRhZ3MgPSB0YWdzLmNvbmNhdChpbmNsdWRlKTsgLy8gQWxsIHRoZSB0YWdzIHNlbGVjdGVkIGJ5IHRoZSB1c2VyXG4gICAgY29uc29sZS5sb2codmFsaWRUYWdzKTtcbiAgICBcbiAgICAvL0RlaW5lIHRoZSB0eXBlIGZvciB0YWcgZGF0YSBcbiAgICB0eXBlIFRhZ0RhdGEgPSB7XG4gICAgICB0YWc6IHN0cmluZzsgXG4gICAgICBmaWxlOiBzdHJpbmc7XG4gICAgICBwYXRoOiBzdHJpbmc7XG4gICAgICB0ZXh0OiBzdHJpbmc7IFxuICAgIH1cbiAgICBsZXQgYWxsX3RhZ19pbmZvOiBUYWdEYXRhW10gPSBBcnJheSgpO1xuICAgIFxuXHRcdC8vIEdldCBmaWxlc1xuXHRcdGxldCBsaXN0RmlsZXMgPSB0aGlzLmFwcC52YXVsdC5nZXRNYXJrZG93bkZpbGVzKCk7XG5cblx0XHQvLyBGaWx0ZXIgZmlsZXNcblx0XHRsaXN0RmlsZXMgPSBsaXN0RmlsZXMuZmlsdGVyKChmaWxlKSA9PiB7XG5cdFx0XHQvLyBSZW1vdmUgZmlsZXMgdGhhdCBkbyBub3QgY29udGFpbiB0aGUgdGFncyBzZWxlY3RlZCBieSB0aGUgdXNlclxuXHRcdFx0Y29uc3QgY2FjaGUgPSBhcHAubWV0YWRhdGFDYWNoZS5nZXRGaWxlQ2FjaGUoZmlsZSk7XG5cdFx0XHRjb25zdCB0YWdzSW5GaWxlID0gZ2V0QWxsVGFncyhjYWNoZSk7XG5cblx0XHRcdGlmICh2YWxpZFRhZ3Muc29tZSgodmFsdWUpID0+IHRhZ3NJbkZpbGUuaW5jbHVkZXModmFsdWUpKSkge1xuXHRcdFx0XHRyZXR1cm4gdHJ1ZTtcblx0XHRcdH1cblx0XHRcdGlmICh2YWxpZFRhZ3MuaW5jbHVkZXMoXCJhbGxcIikpIHtcblx0XHRcdCAgcmV0dXJuIHRydWU7XG5cdFx0XHR9XG5cdFx0XHRyZXR1cm4gZmFsc2U7XG4gICAgICAgIH0pO1xuXG5cdFx0Ly8gU29ydCBmaWxlcyBhbHBoYWJldGljYWxseVxuXHRcdGxpc3RGaWxlcyA9IGxpc3RGaWxlcy5zb3J0KChmaWxlMSwgZmlsZTIpID0+IHtcblx0XHRcdGlmIChmaWxlMS5wYXRoIDwgZmlsZTIucGF0aCkge1xuXHRcdFx0XHRyZXR1cm4gLTE7XG5cdFx0XHR9IGVsc2UgaWYgKGZpbGUxLnBhdGggPiBmaWxlMi5wYXRoKSB7XG5cdFx0XHRcdHJldHVybiAxO1xuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0cmV0dXJuIDA7XG5cdFx0XHR9XG5cdFx0fSk7XG5cblx0XHQvLyBHZXQgZmlsZXMgY29udGVudFxuXHRcdGxldCBsaXN0Q29udGVudHM6IFtURmlsZSwgc3RyaW5nXVtdID0gYXdhaXQgdGhpcy5yZWFkRmlsZXMobGlzdEZpbGVzKTtcblxuXHRcdC8vIENyZWF0ZSBzdW1tYXJ5XG5cdFx0bGV0IHN1bW1hcnk6IHN0cmluZyA9IFwiXCI7XG5cdFx0bGlzdENvbnRlbnRzLmZvckVhY2goKGl0ZW0pID0+IHtcblx0XHRcdC8vIEdldCBmaWxlcyBuYW1lXG5cdFx0XHRjb25zdCBmaWxlTmFtZSA9IGl0ZW1bMF0ubmFtZS5yZXBsYWNlKC8ubWQkL2csIFwiXCIpO1xuXHRcdFx0Y29uc3QgZmlsZVBhdGggPSBpdGVtWzBdLnBhdGg7XG5cblx0XHRcdC8vIEdldCBwcm9jZXNzIGVhY2ggYmxvY2sgb2YgdGV4dFxuXHRcdFx0Y29uc3QgYmxvY2sgPSBpdGVtWzFdLnNwbGl0KC9cXG5cXHMqXFxuLykuZmlsdGVyKChyb3cpID0+IHJvdy50cmltKCkubGVuZ3RoID4gMCk7XG5cdFx0XHRibG9jay5mb3JFYWNoKChwYXJhZ3JhcGgpID0+IHtcblx0XHRcdFx0Ly8gQ2hlY2sgaWYgdGhlIHBhcmFncmFwaCBpcyB2YWxpZFxuXHRcdFx0XHRsZXQgdmFsaWQgPSBmYWxzZTtcblx0XHRcdFx0Y29uc3QgbGlzdFRhZ3MgPSBwYXJhZ3JhcGgubWF0Y2goLyNbYS16QS1aMC05X1xcLS8jXSsvZyk7XG5cdFx0XHRcdGlmIChsaXN0VGFncyAhPSBudWxsICYmIGxpc3RUYWdzLmxlbmd0aCA+IDApIHtcblx0XHRcdFx0XHQvLyBEbyBub3QgcHJvY2VzcyBwbHVnaW5zXG5cdFx0XHRcdFx0aWYgKCFwYXJhZ3JhcGguY29udGFpbnMoXCJgYGBcIikpIHtcblx0XHRcdFx0XHRcdHZhbGlkID0gdGhpcy5pc1ZhbGlkVGV4dChsaXN0VGFncywgdGFncywgaW5jbHVkZSwgZXhjbHVkZSk7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cblx0XHRcdFx0Ly8gSWYgdmFsaWQsIGluY2x1ZGUgdGhlIHBhcmFncmFwaCBpbiB0aGUgc3VtbWFyeVxuXHRcdFx0XHRpZiAodmFsaWQpIHtcblx0XHRcdFx0ICBcblx0XHRcdFx0ICBcblx0XHRcdFx0XHQvLyBSZXN0b3JlIG5ld2xpbmUgYXQgdGhlIGVuZFxuXHRcdFx0XHRcdHBhcmFncmFwaCArPSBcIlxcblwiO1xuXG5cdFx0XHRcdFx0Ly8gUmVtb3ZlIHRhZ3MgZnJvbSBibG9ja3Ncblx0XHRcdFx0XHRpZiAodGhpcy5zZXR0aW5ncy5yZW1vdmV0YWdzKSB7XG5cdFx0XHRcdFx0XHRwYXJhZ3JhcGggPSBwYXJhZ3JhcGgucmVwbGFjZSgvI1thLXpBLVowLTlfXFwtLyNdKy9nLCBcIlwiKTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XG5cdFx0XHRcdFx0bGlzdFRhZ3MuZm9yRWFjaCgodCkgPT4ge1xuXHRcdFx0XHQgICAgYWxsX3RhZ19pbmZvLnB1c2goe3RhZzogdCxcblx0XHRcdFx0ICAgICAgICAgICAgICAgICAgICAgICBmaWxlOiBmaWxlTmFtZSxcblx0XHRcdFx0ICAgICAgICAgICAgICAgICAgICAgICBwYXRoOiBmaWxlUGF0aCxcblx0XHRcdFx0ICAgICAgICAgICAgICAgICAgICAgICB0ZXh0OiBwYXJhZ3JhcGhcblx0XHRcdFx0ICAgIH0pO1xuXHRcdFx0XHQgIH0pO1xuXG5cblx0XHRcdFx0XHQvLyBBZGQgbGluayB0byBvcmlnaW5hbCBub3RlXG5cdFx0XHRcdFx0aWYgKHRoaXMuc2V0dGluZ3MuIGluY2x1ZGVsaW5rKSB7XG5cdFx0XHRcdFx0XHRwYXJhZ3JhcGggPSBcIioqU291cmNlOioqIFtbXCIgKyBmaWxlUGF0aCArIFwifFwiICsgZmlsZU5hbWUgKyBcIl1dXFxuXCIgKyBwYXJhZ3JhcGg7XG5cdFx0XHRcdFx0fVxuXG5cdFx0XHRcdFx0Ly8gSW5zZXJ0IHRoZSB0ZXh0IGluIGEgY2FsbG91dFxuXHRcdFx0XHRcdGlmICh0aGlzLnNldHRpbmdzLmluY2x1ZGVjYWxsb3V0KSB7XG5cdFx0XHRcdFx0XHQvLyBJbnNlcnQgdGhlIHRleHQgaW4gYSBjYWxsb3V0IGJveFxuXHRcdFx0XHRcdFx0bGV0IGNhbGxvdXQgPSBcIj4gWyFcIiArIGZpbGVOYW1lICsgXCJdXFxuXCI7XG5cdFx0XHRcdFx0XHRjb25zdCByb3dzID0gcGFyYWdyYXBoLnNwbGl0KFwiXFxuXCIpO1xuXHRcdFx0XHRcdFx0cm93cy5mb3JFYWNoKChyb3cpID0+IHtcblx0XHRcdFx0XHRcdFx0Y2FsbG91dCArPSBcIj4gXCIgKyByb3cgKyBcIlxcblwiO1xuXHRcdFx0XHRcdFx0fSk7XG5cdFx0XHRcdFx0XHRwYXJhZ3JhcGggPSBjYWxsb3V0ICsgXCJcXG5cXG5cIjtcblx0XHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdFx0Ly8gTm8gQ2FsbG91dFxuXHRcdFx0XHRcdFx0cGFyYWdyYXBoICs9IFwiXFxuXFxuXCI7XG5cdFx0XHRcdFx0fVxuXG5cdFx0XHRcdFx0Ly8gQWRkIHRvIFN1bW1hcnlcblx0XHRcdFx0XHRzdW1tYXJ5ICs9IHBhcmFncmFwaDtcblx0XHRcdFx0fVxuXHRcdFx0fSk7XG5cdFx0fSk7XG4gICAgXG4gICAgYWxsX3RhZ19pbmZvID0gYWxsX3RhZ19pbmZvLnNvcnQoKHRkMSwgdGQyKSA9PiB7XG4gICAgICBpZiAodGQxLnRhZyA8IHRkMi50YWcpIHtcbiAgICAgICAgcmV0dXJuIC0xO1xuICAgICAgfSBlbHNlIGlmICh0ZDEudGFnID4gdGQyLnRhZykge1xuICAgICAgICByZXR1cm4gMTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGlmICh0ZDEuZmlsZSA8IHRkMi5maWxlKSB7XG4gICAgICAgICAgcmV0dXJuIC0xO1xuICAgICAgICB9IGVsc2UgaWYgKHRkMS5maWxlID4gdGQyLmZpbGUpIHtcbiAgICAgICAgICByZXR1cm4gMTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICByZXR1cm4gMDtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0pO1xuICAgIGNvbnNvbGUubG9nKGFsbF90YWdfaW5mbyk7XG4gICAgXG4gICAgLy8gUmVidWlsZCB0aGUgc3VtbWFyeVxuICAgIHN1bW1hcnkgPSBcIlwiO1xuICAgIGxldCBwcmV2X3RhZzogU3RyaW5nID0gXCJcIjtcbiAgICBsZXQgcHJldl9maWxlOiBTdHJpbmcgPSBcIlwiO1xuICAgIFxuICAgIGFsbF90YWdfaW5mby5mb3JFYWNoKCAodGFnX2RhdGEpID0+IHtcbiAgICAgIGlmICh0YWdfZGF0YS50YWcgIT0gcHJldl90YWcpIHtcbiAgICAgICAgc3VtbWFyeSArPSBcIiBcXG5cXG4jIyBcIiArIHRhZ19kYXRhLnRhZy5yZXBsYWNlKC8jL2csIFwiXCIpICsgXCJcXG5cIjtcbiAgICAgICAgcHJldl90YWcgPSB0YWdfZGF0YS50YWc7XG4gICAgICAgIHByZXZfZmlsZSA9IFwiXCI7IC8vUmVzZXQgcHJldmlvdXMgZmlsZSB3aGVuIHdlIGdldCB0byBhIG5ldyB0YWdcbiAgICAgIH1cbiAgICAgIGlmICh0YWdfZGF0YS5maWxlICE9IHByZXZfZmlsZSkge1xuICAgICAgICBpZiAodGhpcy5zZXR0aW5ncy4gaW5jbHVkZWxpbmspIHtcbiAgICAgICAgICBzdW1tYXJ5ICs9IFwiIyMjIyMjIFwiICsgXCJbW1wiICsgdGFnX2RhdGEucGF0aCArIFwifFwiICsgdGFnX2RhdGEuZmlsZSArIFwiXV1cIiArIFwiXFxuXCI7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgc3VtbWFyeSArPSBcIiMjIyMjIyBcIiArIHRhZ19kYXRhLmZpbGUgKyBcIlxcblwiO1xuICAgICAgICB9XG4gICAgICAgIHByZXZfZmlsZSA9IHRhZ19kYXRhLmZpbGU7XG4gICAgICB9XG4gICAgICBzdW1tYXJ5ICs9IFwiKyBcIiArIHRhZ19kYXRhLnRleHQ7XG4gICAgICBjb25zb2xlLmxvZyhzdW1tYXJ5KTtcbiAgICB9KTtcblx0XHRcbiAgICBcblx0XHQvLyBBZGQgU3VtbWFyeVxuXHRcdGlmIChzdW1tYXJ5ICE9IFwiXCIpIHtcblx0XHRcdGxldCBzdW1tYXJ5Q29udGFpbmVyID0gY3JlYXRlRWwoXCJkaXZcIik7XG5cdFx0XHRhd2FpdCBNYXJrZG93blJlbmRlcmVyLnJlbmRlck1hcmtkb3duKHN1bW1hcnksIHN1bW1hcnlDb250YWluZXIsIHRoaXMuYXBwLndvcmtzcGFjZS5nZXRBY3RpdmVGaWxlKCk/LnBhdGgsIG51bGwpO1xuXHRcdFx0ZWxlbWVudC5yZXBsYWNlV2l0aChzdW1tYXJ5Q29udGFpbmVyKTtcblx0XHR9IGVsc2Uge1xuXHRcdFx0dGhpcy5jcmVhdGVFbXB0eVN1bW1hcnkoZWxlbWVudCk7XG5cdFx0fVxuXHR9XG5cblx0Ly8gUmVhZCBGaWxlc1xuXHRhc3luYyByZWFkRmlsZXMobGlzdEZpbGVzOiBURmlsZVtdKTogUHJvbWlzZTxbVEZpbGUsIHN0cmluZ11bXT4ge1xuXHRcdGxldCBsaXN0OiBbVEZpbGUsIHN0cmluZ11bXSA9IFtdO1xuXHRcdGZvciAobGV0IHQgPSAwOyB0IDwgbGlzdEZpbGVzLmxlbmd0aDsgdCArPSAxKSB7XG5cdFx0XHRjb25zdCBmaWxlID0gbGlzdEZpbGVzW3RdO1xuXHRcdFx0bGV0IGNvbnRlbnQgPSBhd2FpdCB0aGlzLmFwcC52YXVsdC5jYWNoZWRSZWFkKGZpbGUpO1xuXHRcdFx0bGlzdC5wdXNoKFtmaWxlLCBjb250ZW50XSk7XG5cdFx0fVxuXHRcdHJldHVybiBsaXN0O1xuXHR9XG5cblx0Ly8gQ2hlY2sgaWYgdGFncyBhcmUgdmFsaWRcblx0aXNWYWxpZFRleHQobGlzdFRhZ3M6IHN0cmluZ1tdLCB0YWdzOiBzdHJpbmdbXSwgaW5jbHVkZTogc3RyaW5nW10sIGV4Y2x1ZGU6IHN0cmluZ1tdKTogYm9vbGVhbiB7XG5cdFx0bGV0IHZhbGlkID0gdHJ1ZTtcblxuICAgIGNvbnNvbGUubG9nKHRhZ3MpO1xuICAgIGlmICh0YWdzLmluY2x1ZGVzKFwiYWxsXCIpKSB7XG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gICAgXG5cdFx0Ly8gQ2hlY2sgT1IgKHRhZ3MpXG5cdFx0aWYgKHRhZ3MubGVuZ3RoID4gMCkge1xuXHRcdFx0dmFsaWQgPSB2YWxpZCAmJiB0YWdzLnNvbWUoKHZhbHVlKSA9PiBsaXN0VGFncy5pbmNsdWRlcyh2YWx1ZSkpO1xuXHRcdH1cblx0XHQvLyBDaGVjayBBTkQgKGluY2x1ZGUpXG5cdFx0aWYgKGluY2x1ZGUubGVuZ3RoID4gMCkge1xuXHRcdFx0dmFsaWQgPSB2YWxpZCAmJiBpbmNsdWRlLmV2ZXJ5KCh2YWx1ZSkgPT4gbGlzdFRhZ3MuaW5jbHVkZXModmFsdWUpKTtcblx0XHR9XG5cdFx0Ly8gQ2hlY2sgTk9UIChleGNsdWRlKVxuXHRcdGlmICh2YWxpZCAmJiBleGNsdWRlLmxlbmd0aCA+IDApIHtcblx0XHRcdHZhbGlkID0gIWV4Y2x1ZGUuc29tZSgodmFsdWUpID0+IGxpc3RUYWdzLmluY2x1ZGVzKHZhbHVlKSk7XG5cdFx0fVxuXHRcdHJldHVybiB2YWxpZDtcdFx0XG5cdH1cblxuXHQvLyBTZXR0aW5nc1xuXHRhc3luYyBsb2FkU2V0dGluZ3MoKSB7XG5cdFx0dGhpcy5zZXR0aW5ncyA9IE9iamVjdC5hc3NpZ24oe30sIERFRkFVTFRfU0VUVElOR1MsIGF3YWl0IHRoaXMubG9hZERhdGEoKSk7XG5cdH1cblx0YXN5bmMgc2F2ZVNldHRpbmdzKCkge1xuXHRcdGF3YWl0IHRoaXMuc2F2ZURhdGEodGhpcy5zZXR0aW5ncyk7XG5cdH1cdFxufVxuXG4iLCAiXG5pbXBvcnQgU3VtbWFyeVBsdWdpbiBmcm9tIFwibWFpblwiO1xuaW1wb3J0IHsgQXBwLCBQbHVnaW5TZXR0aW5nVGFiLCBTZXR0aW5nIH0gZnJvbSBcIm9ic2lkaWFuXCI7XG5cbmV4cG9ydCBjbGFzcyBTdW1tYXJ5U2V0dGluZ1RhYiBleHRlbmRzIFBsdWdpblNldHRpbmdUYWIge1xuICAgIHBsdWdpbjogU3VtbWFyeVBsdWdpbjtcblxuICAgIGNvbnN0cnVjdG9yKGFwcDogQXBwLCBwbHVnaW46IFN1bW1hcnlQbHVnaW4pIHtcbiAgICAgICAgc3VwZXIoYXBwLCBwbHVnaW4pO1xuICAgICAgICB0aGlzLnBsdWdpbiA9IHBsdWdpbjtcbiAgICB9XG4gICAgZGlzcGxheSgpOiB2b2lkIHtcbiAgICAgICAgbGV0IHsgY29udGFpbmVyRWwgfSA9IHRoaXM7XG5cbiAgICAgICAgY29udGFpbmVyRWwuZW1wdHkoKTtcblxuICAgICAgICBuZXcgU2V0dGluZyhjb250YWluZXJFbClcbiAgICAgICAgLnNldE5hbWUoXCJTaG93IENhbGxvdXRzXCIpXG4gICAgICAgIC5zZXREZXNjKFwiU2hvdyB0aGUgdGV4dCBpbiBjYWxsb3V0IGJsb2Nrc1wiKVxuICAgICAgICAuYWRkVG9nZ2xlKCh0b2dnbGUpID0+XG4gICAgICAgICAgICB0b2dnbGVcbiAgICAgICAgICAgIC5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5pbmNsdWRlY2FsbG91dClcbiAgICAgICAgICAgIC5vbkNoYW5nZShhc3luYyAodmFsdWUpID0+IHtcbiAgICAgICAgICAgICAgICB0aGlzLnBsdWdpbi5zZXR0aW5ncy5pbmNsdWRlY2FsbG91dCA9IHZhbHVlO1xuICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xuICAgICAgICAgICAgfSlcbiAgICAgICAgKTtcbiAgICAgICAgbmV3IFNldHRpbmcoY29udGFpbmVyRWwpXG4gICAgICAgIC5zZXROYW1lKFwiU2hvdyBMaW5rXCIpXG4gICAgICAgIC5zZXREZXNjKFwiU2hvdyBsaW5rIHRvIG9yaWdpbmFsIG5vdGVcIilcbiAgICAgICAgLmFkZFRvZ2dsZSgodG9nZ2xlKSA9PlxuICAgICAgICAgICAgdG9nZ2xlXG4gICAgICAgICAgICAuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3MuaW5jbHVkZWxpbmspXG4gICAgICAgICAgICAub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiB7XG4gICAgICAgICAgICAgICAgdGhpcy5wbHVnaW4uc2V0dGluZ3MuaW5jbHVkZWxpbmsgPSB2YWx1ZTtcbiAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcbiAgICAgICAgICAgIH0pXG4gICAgICAgICk7XG4gICAgICAgIG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxuICAgICAgICAuc2V0TmFtZShcIlJlbW92ZSBUYWdzXCIpXG4gICAgICAgIC5zZXREZXNjKFwiUmVtb3ZlIHRhZ3MgZnJvbSB0ZXh0XCIpXG4gICAgICAgIC5hZGRUb2dnbGUoKHRvZ2dsZSkgPT5cbiAgICAgICAgICAgIHRvZ2dsZVxuICAgICAgICAgICAgLnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLnJlbW92ZXRhZ3MpXG4gICAgICAgICAgICAub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiB7XG4gICAgICAgICAgICAgICAgdGhpcy5wbHVnaW4uc2V0dGluZ3MucmVtb3ZldGFncyA9IHZhbHVlO1xuICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xuICAgICAgICAgICAgfSlcbiAgICAgICAgKTtcbiAgICB9XG59XG4iLCAiXG5pbXBvcnQgeyBBcHAsIE1vZGFsLCBTZXR0aW5nLCBnZXRBbGxUYWdzLCBURmlsZSB9IGZyb20gXCJvYnNpZGlhblwiO1xuXG5leHBvcnQgY2xhc3MgU3VtbWFyeU1vZGFsIGV4dGVuZHMgTW9kYWwge1xuICAgIGluY2x1ZGU6IHN0cmluZztcbiAgICBleGNsdWRlOiBzdHJpbmc7XG5cbiAgICBvblN1Ym1pdDogKGluY2x1ZGU6IHN0cmluZywgZXhjbHVkZTogc3RyaW5nKSA9PiB2b2lkO1xuXG4gICAgY29uc3RydWN0b3IoYXBwOiBBcHAsIG9uU3VibWl0OiAoaW5jbHVkZTogc3RyaW5nLCBleGNsdWRlOiBzdHJpbmcpID0+IHZvaWQpIHtcbiAgICAgICAgc3VwZXIoYXBwKTtcbiAgICAgICAgdGhpcy5vblN1Ym1pdCA9IG9uU3VibWl0O1xuICAgIH1cblxuICAgIG9uT3BlbigpIHtcbiAgICAgICAgLy8gTG9hZCB0YWdzXG4gICAgICAgIGxldCBsaXN0VGFnczogc3RyaW5nW10gPSBbXTtcbiAgICAgICAgbGV0IGxpc3RGaWxlcyA9IHRoaXMuYXBwLnZhdWx0LmdldE1hcmtkb3duRmlsZXMoKTtcblxuICAgICAgICBsaXN0RmlsZXMuZm9yRWFjaCgoZmlsZSkgPT4ge1xuICAgICAgICAgICAgY29uc3QgY2FjaGUgPSBhcHAubWV0YWRhdGFDYWNoZS5nZXRGaWxlQ2FjaGUoZmlsZSk7XG4gICAgICAgICAgICBsaXN0VGFncyA9IGxpc3RUYWdzLmNvbmNhdChnZXRBbGxUYWdzKGNhY2hlKSk7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIC8vIFJlbW92ZSBkdXBsaWNhdGVzIGFuZCBzb3J0IHRhZ3NcbiAgICAgICAgY29uc3QgdGFnc1NldCA9IG5ldyBTZXQobGlzdFRhZ3MpO1xuICAgICAgICBsaXN0VGFncyA9IEFycmF5LmZyb20odGFnc1NldCkuc29ydCgpO1xuXG4gICAgICAgIC8vIEdldCBsaXN0IG9mIHRhZ3MgdG8gZXhjbHVkZSAoSW5jbHVkaW5nIHRoZSBOb25lIG9wdGlvbilcbiAgICAgICAgY29uc3QgdGFnc1RvRXhjbHVkZSA9IFtcIk5vbmVcIl0uY29uY2F0KGxpc3RUYWdzKTtcblxuICAgICAgICBsZXQgeyBjb250ZW50RWwgfSA9IHRoaXM7XG4gICAgICAgIGNvbnRlbnRFbC5jcmVhdGVFbChcImgxXCIsIHsgdGV4dDogXCJBZGQgU3VtbWFyeVwiIH0pO1xuXG4gICAgICAgIGlmIChsaXN0VGFncy5sZW5ndGggPD0gMCkge1xuICAgICAgICAgICAgY29udGVudEVsLnNldFRleHQoXCJUaGVyZSBhcmUgbm8gdGFncyBpbiB5b3VyIG5vdGVzXCIpOyAgICAgICAgICAgICAgICBcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMuaW5jbHVkZSA9IGxpc3RUYWdzWzBdO1xuICAgICAgICAgICAgbmV3IFNldHRpbmcoY29udGVudEVsKVxuICAgICAgICAgICAgICAgIC5zZXROYW1lKFwiU2VsZWN0IHRhZyB0byBpbmNsdWRlIGluIHRoZSBzdW1tYXJ5XCIpXG4gICAgICAgICAgICAgICAgLmFkZERyb3Bkb3duKChtZW51KSA9PiB7ICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgICAgZm9yIChsZXQgaT0wOyBpPGxpc3RUYWdzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBtZW51LmFkZE9wdGlvbihsaXN0VGFnc1tpXSwgbGlzdFRhZ3NbaV0pO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIG1lbnUuc2V0VmFsdWUobGlzdFRhZ3NbMF0pO1xuICAgICAgICAgICAgICAgICAgICBtZW51Lm9uQ2hhbmdlKCh2YWx1ZSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5pbmNsdWRlID0gdmFsdWU7XG4gICAgICAgICAgICAgICAgICAgIH0pOyBcbiAgICAgICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgdGhpcy5leGNsdWRlID0gdGFnc1RvRXhjbHVkZVswXTtcbiAgICAgICAgICAgIG5ldyBTZXR0aW5nKGNvbnRlbnRFbClcbiAgICAgICAgICAgICAgICAuc2V0TmFtZShcIlNlbGVjdCB0YWcgdG8gZXhjbHVkZSBmcm9tIHRoZSBzdW1tYXJ5XCIpXG4gICAgICAgICAgICAgICAgLmFkZERyb3Bkb3duKChtZW51KSA9PiB7ICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgICAgZm9yIChsZXQgaT0wOyBpPHRhZ3NUb0V4Y2x1ZGUubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIG1lbnUuYWRkT3B0aW9uKHRhZ3NUb0V4Y2x1ZGVbaV0sIHRhZ3NUb0V4Y2x1ZGVbaV0pO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIG1lbnUuc2V0VmFsdWUodGFnc1RvRXhjbHVkZVswXSk7XG4gICAgICAgICAgICAgICAgICAgIG1lbnUub25DaGFuZ2UoKHZhbHVlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmV4Y2x1ZGUgPSB2YWx1ZTtcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBuZXcgU2V0dGluZyhjb250ZW50RWwpXG4gICAgICAgICAgICAgICAgLmFkZEJ1dHRvbigoYnV0dG9uKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGJ1dHRvblxuICAgICAgICAgICAgICAgICAgICAuc2V0QnV0dG9uVGV4dChcIkFkZCBTdW1tYXJ5XCIpXG4gICAgICAgICAgICAgICAgICAgIC5zZXRDdGEoKVxuICAgICAgICAgICAgICAgICAgICAub25DbGljaygoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmNsb3NlKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm9uU3VibWl0KHRoaXMuaW5jbHVkZSwgdGhpcy5leGNsdWRlKTtcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfSlcbiAgICAgICAgfVxuICAgIH1cbiAgICBvbkNsb3NlKCkge1xuICAgICAgICBsZXQgeyBjb250ZW50RWwgfSA9IHRoaXM7XG4gICAgICAgIGNvbnRlbnRFbC5lbXB0eSgpO1xuICAgIH1cbn1cblxuIl0sCiAgIm1hcHBpbmdzIjogIjs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBQTtBQUFBO0FBQUE7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
